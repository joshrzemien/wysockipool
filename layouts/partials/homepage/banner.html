{{- if .carousel.enable -}}
<section id="banner" class="carousel-banner">
    <div class="carousel-container">
        <div class="carousel-images" id="banner-carousel">
            {{- range $index, $image := .carousel.images -}}
            <div class="carousel-slide {{ if eq $index 0 }}active{{ end }}">
                <img src="{{ $image | relURL }}" alt="Banner Image {{ add $index 1 }}" />
            </div>
            {{- end -}}
        </div>
        
        <!-- Navigation Arrows -->
        <button class="carousel-nav carousel-prev" onclick="changeSlide(-1)">
            <i class="fas fa-chevron-left"></i>
        </button>
        <button class="carousel-nav carousel-next" onclick="changeSlide(1)">
            <i class="fas fa-chevron-right"></i>
        </button>
        
        <!-- Content Overlay -->
        <div class="banner-content">
            <header>
                <h2>{{ .contents | markdownify }}</h2>
                {{- if .button }}
                    <a href="{{ .button.url }}" class="button">{{ .button.contents }}</a>
                {{- end }}
            </header>
        </div>
        
        <!-- Dots Indicator -->
        <div class="carousel-dots">
            {{- range $index, $image := .carousel.images -}}
            <span class="dot {{ if eq $index 0 }}active{{ end }}" onclick="currentSlide({{ add $index 1 }})"></span>
            {{- end -}}
        </div>
    </div>
</section>

<script src="{{ "js/carousel.js" | relURL }}"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    initCarousel({
        auto_cycle: {{ .carousel.auto_cycle | default false }},
        cycle_interval: {{ .carousel.cycle_interval | default 5000 }}
    });
});
</script>
{{- else -}}
<!-- Fallback to original banner if carousel is disabled -->
<section id="banner">
    {{- if .image -}}
    <div class="banner-image">
        <img src="{{ .image | relURL }}" alt="Banner" />
    </div>
    {{- end -}}
    <header>
        <h2>{{ .contents | markdownify }}</h2>
        {{- if .button }}
            <a href="{{ .button.url }}" class="button">{{ .button.contents }}</a>
        {{- end }}
    </header>
</section>
{{- end -}}